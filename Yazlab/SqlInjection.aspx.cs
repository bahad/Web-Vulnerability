using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Data.SqlClient;

namespace Yazlab
{
    public partial class SqlInjection : System.Web.UI.Page
    {
        sqlBaglantisi baglan = new sqlBaglantisi();
        protected void Page_Load(object sender, EventArgs e)
        {
            
        }

        protected void Button1_Click(object sender, EventArgs e) 
        {
            SqlCommand cmd1 = new SqlCommand("Select * from kullanici", baglan.baglan());
            SqlDataReader dr2 = cmd1.ExecuteReader();
            GridView1.DataSource = dr2;
            GridView1.DataBind();
        }

        protected void Button2_Click(object sender, EventArgs e)
        {
            SqlCommand cmd = new SqlCommand("Select * from kullanici where kullaniciAd='" + TextBox1.Text + "'", baglan.baglan());
            //SqlCommand cmd = new SqlCommand("Select * from kullanici where kullaniciAd like @kullaniciAd", baglan.baglan());
            //cmd.Parameters.AddWithValue("@kullaniciAd",TextBox1.Text+ "%");
            SqlDataReader dr = cmd.ExecuteReader();
            GridView1.DataSource = dr;
            GridView1.DataBind();
            Response.Redirect("Liste.aspx?kullaniciAd=" + TextBox1.Text);
        }
    }
    }
